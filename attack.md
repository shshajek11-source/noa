🔧 [AI ① BACKEND]
AION2 캐릭터 투력 & 랭크 산출 시스템 구현 요청문
1. 목표

AION2 공식 캐릭터 데이터를 기반으로
사이트 고유 지표인 “투력”을 계산하고,
투력 분포에 따라 D1 ~ S5 랭크를 산정하는 서버 로직을 구현한다.

본 시스템은 공식 전투력이 아닌 상대 비교 지표다.

2. 데이터 수집
수집 대상 (공식 캐릭터 페이지)

공격력

피해 증폭

치명 확률

치명 피해

공격 속도

생존 스탯 (방어 / 피해 감소 / 체력)

수집 조건

로그인 없이 접근 가능한 데이터만 사용

HTML 파싱 또는 내부 API 중 안정적인 방식 선택

서버 ID 기준으로 데이터 분리

3. 서버 평균 데이터 구축
요구 사항

서버별 스탯 평균 테이블 유지

기준: 누적 수집된 캐릭터 데이터

신규 서버/표본 부족 시 전체 서버 평균으로 fallback

4. 투력 계산 로직 (핵심)
4-1. 정규화

각 스탯을 서버 평균 대비 ratio로 변환

ratio = 캐릭터 스탯 / 서버 평균 스탯

4-2. 가중치 적용

가중치는 아래 기준을 기본값으로 사용 (추후 조정 가능)

항목	가중치
공격력	0.30
피해 증폭	0.20
치명 + 치명피해	0.30
공격 속도	0.10
생존 스탯	0.10
4-3. 투력 산출 공식
power_index =
0.30 * atk_ratio +
0.20 * dmgAmp_ratio +
0.30 * crit_ratio +
0.10 * atkSpd_ratio +
0.10 * survive_ratio

투력 = round(1000 * power_index)


※ 투력은 내부 점수이며 UI 기준값은 랭크

5. 랭크 산정 로직 (D1 ~ S5)
랭크 구조
D1 → D2 → D3 → D4 → D5
C1 → C2 → C3 → C4 → C5
B1 → B2 → B3 → B4 → B5
A1 → A2 → A3 → A4 → A5
S1 → S2 → S3 → S4 → S5

랭크 산정 기준

기본: 서버 내 투력 퍼센타일

A / S 랭크: 퍼센타일 + 최소 투력 컷 병행

대분류 퍼센타일

D: 0 ~ 50%

C: 50 ~ 75%

B: 75 ~ 95%

A: 95 ~ 99.7%

S: 상위 0.3%

S1~S5는 상위 0.3% 내에서 세분화

6. API 출력 요구사항
캐릭터 상세보기 API 응답 포함 값
{
  "power": 842,
  "rank": "A3",
  "percentile": 97.9,
  "nextRankPower": 18,
  "statContribution": {
    "attack": 31,
    "damageAmp": 22,
    "crit": 25,
    "attackSpeed": 12,
    "survive": 10
  }
}

7. 설계 원칙 (중요)

투력은 항상 증가 체감이 있어야 함

랭크는 쉽게 오르지 않도록 설계

서버 기준 상대 평가 유지

향후 랭킹/통계 페이지와 연동 가능 구조