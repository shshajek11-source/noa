# 홈 모바일 페이지 동기화 기획서

> 작성일: 2026-01-21
> 목적: PC 홈 페이지와 모바일 홈 페이지 기능 동기화

---

## 1. 현재 상태 분석

### 1.1 PC 버전 (`/page.tsx`)
- **상태**: 완전한 기능 구현 완료
- **코드량**: 약 202줄
- **데이터 연동**: API 실시간 연동
- **주요 기능**:
  - 실시간 스트리밍 (`LiveStreamContainer`)
  - 랭킹 위젯 (`RankingWidget`)
  - 공식 뉴스 피드 (`OfficialNewsFeed`)
  - 서버 통계 대시보드 (`ServerStatsDashboard`)
  - 실시간 업데이트 피드 (`LiveUpdateFeed`)
  - 비교 퀵바 (`CompareQuickBar`)
  - 최근 검색 캐릭터 (localStorage)
  - 백그라운드 배치 업데이트/수집

### 1.2 모바일 버전 (`/components/mobile/HomeMobile.tsx`)
- **상태**: 부분 구현 (일부 하드코딩)
- **코드량**: 약 203줄
- **데이터 연동**: localStorage만 사용
- **주요 기능**:
  - 대표 캐릭터 카드 (localStorage)
  - 최근 검색 캐릭터 (localStorage)
  - 실시간 랭킹 (하드코딩)
  - 서버 현황 (하드코딩)
  - 공지사항 (하드코딩)

---

## 2. 동기화 필요 기능 목록

### 2.1 대표 캐릭터

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 대표 캐릭터 표시 | X (별도 없음) | localStorage | - |
| PVE/PVP 점수 표시 | X | localStorage | - |

> **참고**: 대표 캐릭터 기능은 모바일 전용 기능으로 동기화 불필요

### 2.2 최근 검색 캐릭터

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 최근 검색 목록 | localStorage | localStorage | **동기화 완료** |
| 캐릭터 클릭 시 이동 | O | O | **동기화 완료** |
| 전체 삭제 | O | O | **동기화 완료** |
| 개별 삭제 | O | X | P2 |

### 2.3 실시간 랭킹

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 랭킹 데이터 조회 | `RankingWidget` (API) | 하드코딩 | **P0** |
| TOP 3 표시 | O | 하드코딩 (3개) | **P0** |
| 전체보기 링크 | O | O | **동기화 완료** |
| 서버/종족 필터 | O | X | P1 |
| 랭킹 타입 전환 | O (HITON/콘텐츠) | X | P1 |

### 2.4 서버 현황

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 서버 통계 조회 | `ServerStatsDashboard` (API) | 하드코딩 | **P0** |
| 세력 우세 표시 | O | 하드코딩 | **P0** |
| 세금 정보 | O | 하드코딩 | **P0** |
| 실시간 업데이트 | O | X | P1 |

### 2.5 공식 공지

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 공지사항 조회 | `OfficialNewsFeed` (API) | 하드코딩 | **P0** |
| 공지 목록 표시 | O | 하드코딩 (3개) | **P0** |
| 새 공지 표시 | O | 하드코딩 | **P0** |
| 공지 클릭 시 이동 | O | X | P1 |

### 2.6 실시간 스트리밍

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 라이브 스트림 표시 | `LiveStreamContainer` | X | P2 |
| 스트리머 목록 | O | X | P2 |

### 2.7 실시간 업데이트 피드

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 최근 업데이트 목록 | `LiveUpdateFeed` | X | P2 |
| 실시간 갱신 | O | X | P2 |

### 2.8 비교 기능

| 기능 | PC 구현 | 모바일 현황 | 우선순위 |
|------|---------|-------------|----------|
| 비교 퀵바 | `CompareQuickBar` | X | P3 |

> **참고**: 비교 기능은 PC 전용 기능으로 모바일 미지원 권장

---

## 3. 기술적 구현 방안

### 3.1 사용할 API 엔드포인트

| 기능 | API 엔드포인트 |
|------|---------------|
| 랭킹 조회 | `/api/ranking?type=noa&limit=3` |
| 서버 통계 | `/api/server-stats` (확인 필요) |
| 공지사항 | `/api/news` 또는 외부 크롤링 |

### 3.2 재사용 가능한 PC 컴포넌트 로직

```
/components/home/
├── ranking/RankingWidget.tsx     → API 호출 로직 참고
├── stats/ServerStatsDashboard.tsx → 서버 통계 로직 참고
└── news/OfficialNewsFeed.tsx      → 뉴스 피드 로직 참고
```

### 3.3 모바일 전용 수정 사항

```tsx
// HomeMobile.tsx 수정 예시

// 1. 랭킹 데이터 fetch 추가
const [rankingData, setRankingData] = useState([])
useEffect(() => {
  fetch('/api/ranking?type=noa&limit=3')
    .then(res => res.json())
    .then(data => setRankingData(data.data || []))
}, [])

// 2. 서버 통계 fetch 추가
const [serverStats, setServerStats] = useState([])
useEffect(() => {
  fetch('/api/server-stats')
    .then(res => res.json())
    .then(data => setServerStats(data))
}, [])

// 3. 공지사항 fetch 추가
const [notices, setNotices] = useState([])
useEffect(() => {
  fetch('/api/news?limit=3')
    .then(res => res.json())
    .then(data => setNotices(data))
}, [])
```

---

## 4. 구현 단계 (Phase)

### Phase 1: 핵심 데이터 연동 (P0)
**목표**: 하드코딩 데이터를 실제 API 데이터로 교체

1. 실시간 랭킹 API 연동
   - `/api/ranking` 호출
   - TOP 3 데이터 표시
   - 로딩/에러 상태 처리

2. 서버 현황 API 연동
   - 서버 통계 API 확인 및 연동
   - 세력 우세/세금 정보 표시

3. 공지사항 API 연동
   - 뉴스 API 확인 및 연동
   - 최신 공지 3개 표시

### Phase 2: 기능 확장 (P1)
**목표**: 필터 및 상호작용 추가

1. 랭킹 필터 추가
   - 서버 선택
   - 종족 선택
   - 랭킹 타입 전환

2. 공지 상세 이동
   - 공지 클릭 시 상세 페이지 또는 외부 링크

3. 개별 캐릭터 삭제
   - 최근 검색에서 개별 삭제 기능

### Phase 3: 부가 기능 (P2~P3)
**목표**: PC와 기능 동등성

1. 실시간 스트리밍 (선택)
2. 실시간 업데이트 피드 (선택)
3. 비교 기능 (미지원 권장)

---

## 5. 주의사항

### 5.1 기존 기능 유지
- PC 버전 코드 수정 금지
- localStorage 기반 기능 유지 (대표 캐릭터, 최근 검색)

### 5.2 모바일 특성 고려
- 데이터 요청 최소화 (초기 로드 시 필요한 것만)
- 스켈레톤 UI로 로딩 상태 표시
- 에러 시 하드코딩 fallback 고려

### 5.3 성능 최적화
- API 호출 병렬 처리 (`Promise.all`)
- 불필요한 리렌더링 방지
- 이미지 lazy loading

---

## 6. 파일 구조

```
/app/
├── page.tsx                          # PC 홈 (수정 X)
├── Home.module.css                   # PC 스타일
├── components/
│   ├── home/                         # PC 홈 컴포넌트 (수정 X)
│   │   ├── ranking/RankingWidget.tsx
│   │   ├── stats/ServerStatsDashboard.tsx
│   │   ├── news/OfficialNewsFeed.tsx
│   │   └── feed/LiveUpdateFeed.tsx
│   └── mobile/
│       ├── HomeMobile.tsx            # 모바일 홈 (동기화 대상)
│       └── HomeMobile.module.css     # 모바일 스타일
```

---

## 7. 예상 작업량

| Phase | 예상 작업 항목 수 | 복잡도 |
|-------|------------------|--------|
| Phase 1 | 3개 (랭킹, 서버, 공지) | 낮음 |
| Phase 2 | 3개 (필터, 링크, 삭제) | 중 |
| Phase 3 | 2개 (스트리밍, 피드) | 중 |

---

## 8. 현재 동기화 상태 요약

| 기능 | 상태 |
|------|------|
| 대표 캐릭터 | 모바일 전용 (유지) |
| 최근 검색 | **동기화 완료** |
| 실시간 랭킹 | **동기화 필요** (하드코딩) |
| 서버 현황 | **동기화 필요** (하드코딩) |
| 공지사항 | **동기화 필요** (하드코딩) |
| 스트리밍 | 미구현 (선택) |
| 업데이트 피드 | 미구현 (선택) |
| 비교 기능 | 미지원 (PC 전용) |

---

*본 기획서는 기능 동기화 작업의 범위와 방향을 정의합니다.*
