# AION 2 능력치 시스템 개선 - 작업 제안서

## 📋 현재 상황 요약

### ✅ 완료된 작업
1. **실제 게임 능력치 증가 계산 시스템** (`statBonusCalculator.ts`)
   - 실제 AION 2 공식 기반 보너스 계산
   - 소프트/하드 캡 및 수확 체감 적용
   - 만렙 45레벨 기준으로 조정 완료

2. **기본 설정 수정**
   - 만렙 80레벨 → 45레벨로 변경
   - 세트효과 제거 (AION 2에는 없음)
   - 레벨 보정 계수 수정 완료

3. **모듈 해결**
   - TypeScript 문법 오류 수정
   - Import 오류 해결

---

## 🎯 제안하는 다음 작업들

### 1. 능력치 증가 계산 최적화 (중요도: 🔴 높음)

**문제점:**
- 현재 시스템은 단일 수치 증가만 처리
- "10~200" 같은 레인지(범위) 형태 처리 필요
- 복합 증가 ("+15% +200") 처리 미흡

**제안 솔루션:**
```typescript
// 지원할 형식들
"공격력: 800"          // 기본 수치
"공격력: 800 (+200)"    // 고정 증가
"공격력: 800 (+5%)"     // 퍼센트 증가
"공격력: 800 (+15% +200)" // 복합 증가
"공격력: 10~200"        // 레인지 형태
"치명타: 150-180"       // 범위 형태
```

### 2. UI 개선 - 실제 능력치 모드 (중요도: 🟡 중간)

**현재 상태:**
- `showRealStats` 상태는 있지만 토글 UI 없음
- 사용자가 실제 게임 공식 적용 여부 선택 불가

**제안 UI:**
```
[🔄 실제 능력치 적용: ON/OFF]  ← 토글 버튼
[⚔️ 전투 스타일 분석: 표시/숨김]  ← 분석 결과 토글
```

### 3. 최종 검증 시스템 (중요도: 🟢 낮음)

**검증 항목:**
- 실제 게임 데이터와의 일치성
- 수확 체감 적용 확인
- 캡 시스템 동작 확인

---

## 🛠️ 기술적 구현 설계도

### 설계도 1: 레인지 처리 로직
```typescript
interface StatRange {
  min: number
  max: number
  isPercentage: boolean
}

function parseStatRange(input: string): StatRange | null {
  // "10~200", "150-180", "5%-15%" 형식 파싱
}
```

### 설계도 2: 복합 증가 처리
```typescript
interface CompoundBonus {
  fixedBonuses: number[]      // [+200, +150]
  percentageBonuses: number[] // [+5%, +10%]
  source: string
}

function calculateCompoundBonus(
  baseValue: number, 
  compound: CompoundBonus
): number
```

### 설계도 3: UI 컴포넌트 구조
```typescript
// StatsControlPanel.tsx
interface StatsControlPanelProps {
  realStatsEnabled: boolean
  combatAnalysisEnabled: boolean
  onToggleRealStats: () => void
  onToggleCombatAnalysis: () => void
}
```

---

## 📝 구현 우선순위 제안

### Phase 1 (핵심 기능)
1. 레인지 처리 로직 구현
2. 복합 증가 계산 추가
3. `statBonusCalculator.ts` 기능 확장

### Phase 2 (UI 개선)
1. 통제 패널 컴포넌트 생성
2. 실제 능력치 토글 기능
3. 전투 스타일 분석 표시

### Phase 3 (검증 및 마무리)
1. 통합 테스트
2. 실제 게임 데이터 비교
3. 사용자 피드백 반영

---

## 🤔 사용자 의사 결정 필요 사항

### 선택 1: **어떤 기능부터 우선적으로 구현할까요?**
- [ ] 레인지 처리 (기술적 완성도)
- [ ] UI 개선 (사용자 경험)
- [ ] 둘 다 동시에

### 선택 2: **UI 디자인 선호도**
- [ ] 간단한 토글 스위치
- [ ] 카드 형태의 제어 패널
- [ ] 기존 스타일과 통합

### 선택 3: **레인지 처리 범위**
- [ ] 최소한의 형식만 지원 (10~200, +5%+100)
- [ ] 모든 복잡한 형식 지원
- [ ] 점진적 확장

---

## 📊 예상 작업 시간

| 작업 | 예상 시간 | 복잡도 |
|------|----------|--------|
| 레인지 처리 | 2-3시간 | 중간 |
| UI 토글 기능 | 1-2시간 | 쉬움 |
| 복합 증가 계산 | 1-2시간 | 중간 |
| 통합 테스트 | 1시간 | 쉬움 |

---

## ⏸️ 다음 단계

**사용자님, 위 제안서를 검토해주세요:**

1. 어떤 기능부터 구현하고 싶으신가요?
2. UI 디자인은 어떤 스타일을 선호하시나요?
3. 레인지 처리는 어느 수준까지 지원할까요?

**사용자님이 최종 확정하면, 그에 맞춰 정확하게 작업을 진행하겠습니다.**

---
*작성일: 2025-01-15*  
*작성자: AI Assistant*