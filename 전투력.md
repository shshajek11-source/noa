# AION2 전투력 계산 시스템 v1.0

## 개요

캐릭터의 종합 전투력을 하나의 숫자로 나타낸 점수입니다.
공격력, 피해 증폭, 전투 효율 등을 종합하여 **"얼마나 데미지를 줄 수 있는가?"**를 계산합니다.

---

## 최종 공식

```
전투력 = DPS 기본 점수 × 다단히트 계수 × 스킬 보너스 계수
```

### DPS 기본 점수
```
DPS = 공격력계수 × 피해증폭계수 × 무기증폭계수 × 치명타계수 × 전투효율계수 × 강타계수
```

---

## 1. 핵심 전투 스탯

### ⚔️ 공격력 (중요도: ★★★★★)

모든 계산의 기초입니다. 공격력이 2배면 점수도 거의 2배가 됩니다.

```typescript
// 공격력 계산
const 기본공격력 = 공격력 + 추가공격력
const 증가율 = 1 + (공격력증가 / 100)
const 최종공격력 = (기본공격력 * 증가율) + 보스공격력 + PVE공격력

// 공격력 계수 (1000 기준 정규화)
const 공격력계수 = 최종공격력 / 1000
```

**목표치**: 4,000 이상

---

### 💥 피해 증폭 (중요도: ★★★★★)

DPS를 곱셈으로 증가시킵니다. 공격력 다음으로 가장 중요합니다.

```typescript
// 피해 증폭 합산
const 총피해증폭 = 피해증폭 + PVE피해증폭 + 보스피해증폭

// 피해 증폭 계수
const 피해증폭계수 = 1 + (총피해증폭 / 100)
```

**목표치**: 80% 이상

---

### 🗡️ 무기 피해 증폭 (중요도: ★★★★☆)

피해 증폭과 별도로 곱셈 적용됩니다 (독립 곱셈 구간).

```typescript
// 무기 피해 증폭 계수
const 무기증폭계수 = 1 + (무기피해증폭 / 100)
```

**목표치**: 25% 이상

---

### ⚡ 치명타 (중요도: ★★★★☆)

치명타 확률에 따른 데미지 증가를 계산합니다. AGI 정확 스탯도 반영됩니다.

```typescript
// 치명타 확률 계산 (최대 100%)
const 치명타확률 = Math.min(100, (치명타스탯 * 0.7) / 10 + (정확스탯 / 10))

// 치명타 피해 계수 (기본 50% + 치명타피해증폭)
const 치명타피해배율 = 0.5 + (치명타피해증폭 / 100)

// 치명타 계수
const 치명타계수 = 1 + (치명타확률 / 100) * 치명타피해배율
```

**예시**: 치명타 1220, 정확 200 → 확률 105.4% (100% 상한) → 계수 2.0

---

### 💨 전투 효율 (중요도: ★★★★☆)

전투 속도와 재사용 감소가 곱셈 시너지를 발생시킵니다.

```typescript
// 전투 효율 계수
const 전투속도계수 = 1 + (전투속도 / 100)
const 재사용감소계수 = 1 + (재사용감소 / 100)
const 전투효율계수 = 전투속도계수 * 재사용감소계수
```

**예시**: 전투 속도 20% + 재사용 감소 15% = 1.20 × 1.15 = 1.38 (38% 증가)

**목표치**: 전투 속도 20% + 재사용 감소 15% 이상

---

### 💥 강타 (중요도: ★★★★☆)

DPS 증폭에 직접 기여하는 곱셈 스탯입니다.

```typescript
// 강타 계수
const 강타계수 = 1 + (강타 / 100)
```

**예시**: 강타 30% → 계수 1.30 (30% 데미지 증가)

**목표치**: 30% 이상

---

## 2. 다단 히트 시스템

연속 주사위 굴림 방식으로 작동합니다 (최대 4회 판정, 실패 시 중단).
숨겨진 기본 확률 19%가 존재합니다.

### 타수별 데미지 배율 (던전 기준)

| 타수 | 데미지 배율 | 증가율 |
|------|------------|--------|
| 1타  | 1.050배    | +5.0%  |
| 2타  | 1.103배    | +10.3% |
| 3타  | 1.155배    | +15.5% |
| 4타  | 1.206배    | +20.6% |

### 다단히트 계수 계산

```typescript
// 실제 확률 = 기본 19% + 스탯 표기 확률
const 실제확률 = Math.min(100, 19 + 다단히트스탯)

// 다단히트 계수 테이블
function 다단히트계수(실제확률: number): number {
  if (실제확률 >= 100) return 1.206  // 4타 고정
  if (실제확률 >= 69) return 1.078   // ~7.8% 증가
  if (실제확률 >= 19) return 1.010   // ~1.0% 증가
  return 1.0
}
```

| 스탯 표기 | 실제 확률 | 계수   | 증가율  |
|----------|----------|--------|---------|
| 0%       | 19%      | 1.010  | +1.0%   |
| 50%      | 69%      | 1.078  | +7.8%   |
| 81%+     | 100%     | 1.206  | +20.6%  |

> 출처: 대만 바하무트 포럼 실측 데이터 기반 선형 증가 모델

---

## 3. 스킬 보너스 시스템

직업별 메타 스킬 통계를 기반으로 스킬 육성도를 점수에 반영합니다.
상위 500명 랭커의 평균 레벨 대비 실제 레벨에 따라 가중치가 적용됩니다.

### 액티브 스킬 보너스

```typescript
// 레벨 기반 보너스
const 액티브레벨보너스 = {
  8: 0.02,   // +2%
  12: 0.05,  // +5%
  16: 0.10,  // +10%
  20: 0.15   // +15%
}

// 중요도 계수 (순위별)
const 중요도계수 = 2.0 - (순위 - 1) * 0.165
// 1순위: 200%, 2순위: 183.5%, ...
```

### 패시브 스킬 보너스

```typescript
// 레벨 기반 보너스
const 패시브레벨보너스 = {
  8: 0.02,   // +2%
  12: 0.05,  // +5%
  16: 0.10,  // +10%
  20: 0.15   // +15%
}

// 중요도 계수 (순위별)
const 중요도계수 = 2.0 - (순위 - 1) * 0.20
// 1순위: 200%, 2순위: 180%, ...
```

### 스티그마(DP) 스킬 보너스

```typescript
// 레벨 기반 보너스
const 스티그마레벨보너스 = {
  5: 0.02,   // +2%
  10: 0.05,  // +5%
  15: 0.10,  // +10%
  20: 0.15   // +15%
}

// 중요도 계수 (랭커 평균 레벨 기반)
// 0레벨 → 100%, 20레벨 → 150%
```

### 최종 스킬 보너스 계수

```typescript
const 스킬보너스 = 액티브평균 + 패시브평균 + 스티그마평균
const 스킬보너스계수 = 1 + (스킬보너스 / 100)
```

---

## 4. 포함되지 않는 스탯

| 스탯 | 제외 사유 |
|------|----------|
| 완벽 | 효과가 약 3%로 미미함 |
| 명중 | 펫 내실 확인 불가하여 불확실 |

---

## 5. 전체 계산 코드

```typescript
interface CharacterStats {
  // 공격력 관련
  공격력: number
  추가공격력: number
  공격력증가: number  // %
  보스공격력: number
  PVE공격력: number

  // 피해 증폭 관련
  피해증폭: number    // %
  PVE피해증폭: number // %
  보스피해증폭: number // %

  // 무기 증폭
  무기피해증폭: number // %

  // 치명타 관련
  치명타: number
  정확: number
  치명타피해증폭: number // %

  // 전투 효율
  전투속도: number    // %
  재사용감소: number  // %

  // 기타
  강타: number        // %
  다단히트: number    // %

  // 스킬 보너스
  스킬보너스: number  // %
}

function calculateCombatPower(stats: CharacterStats): number {
  // 1. 공격력 계수
  const 기본공격력 = stats.공격력 + stats.추가공격력
  const 최종공격력 = (기본공격력 * (1 + stats.공격력증가 / 100))
                    + stats.보스공격력 + stats.PVE공격력
  const 공격력계수 = 최종공격력 / 1000

  // 2. 피해 증폭 계수
  const 총피해증폭 = stats.피해증폭 + stats.PVE피해증폭 + stats.보스피해증폭
  const 피해증폭계수 = 1 + (총피해증폭 / 100)

  // 3. 무기 증폭 계수
  const 무기증폭계수 = 1 + (stats.무기피해증폭 / 100)

  // 4. 치명타 계수
  const 치명타확률 = Math.min(100, (stats.치명타 * 0.7) / 10 + (stats.정확 / 10))
  const 치명타피해배율 = 0.5 + (stats.치명타피해증폭 / 100)
  const 치명타계수 = 1 + (치명타확률 / 100) * 치명타피해배율

  // 5. 전투 효율 계수
  const 전투효율계수 = (1 + stats.전투속도 / 100) * (1 + stats.재사용감소 / 100)

  // 6. 강타 계수
  const 강타계수 = 1 + (stats.강타 / 100)

  // 7. DPS 기본 점수
  const DPS기본점수 = 공격력계수 * 피해증폭계수 * 무기증폭계수
                     * 치명타계수 * 전투효율계수 * 강타계수

  // 8. 다단히트 계수
  const 실제다단확률 = Math.min(100, 19 + stats.다단히트)
  let 다단히트계수 = 1.0
  if (실제다단확률 >= 100) 다단히트계수 = 1.206
  else if (실제다단확률 >= 69) 다단히트계수 = 1.078
  else if (실제다단확률 >= 19) 다단히트계수 = 1.010

  // 9. 스킬 보너스 계수
  const 스킬보너스계수 = 1 + (stats.스킬보너스 / 100)

  // 10. 최종 전투력
  const 전투력 = DPS기본점수 * 다단히트계수 * 스킬보너스계수

  // 1000 단위로 정규화하여 읽기 쉬운 점수로 변환
  return Math.round(전투력 * 1000)
}
```

---

## 6. 빌드 최적화 가이드

| 순서 | 항목 | 목표치 | 설명 |
|------|------|--------|------|
| 1 | 공격력 | 4,000+ | 장비 강화, 아이템 레벨 상승 |
| 2 | 피해 증폭 | 80%+ | 보스/PVE 피해 증폭 확보 |
| 3 | 무기 피해 증폭 | 25%+ | 무기 서브 스탯, 마석 |
| 4 | 강타 | 30%+ | 칭호, 데바니온으로 확보 |
| 5 | 치명타 | 최적화 | 치명타 + AGI 정확 스탯 함께 육성 |
| 6 | 전투 효율 | 35%+ | 전투 속도 20% + 재사용 감소 15% |
| 7 | 스킬 육성 | Lv.16+ | 메타 Active/Passive, Stigma Lv.10+ |

---

## 7. 참고사항

- 점수는 참고 지표이며, 실제 전투력은 플레이 스타일과 스킬 활용에 따라 달라질 수 있습니다
- 점수가 낮다면 아이템 정보가 정상 등록되지 않았을 수 있습니다
- 공격력과 피해 증폭을 균형있게 올려야 효과적입니다
- 전투 속도와 재사용 감소는 곱셈 시너지가 있어 함께 올리면 좋습니다
- 치명타 최적화: 치명타 스탯과 AGI 정확을 함께 올리세요
- 이 점수는 **PVE (보스 사냥) 기준**입니다

---

## 버전 히스토리

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| v1.0 | 2026.01.11 | 초기 버전 - AION 점수 V3.3 기반 |
