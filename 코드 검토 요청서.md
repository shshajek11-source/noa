# 코드 검토 요청서

## 📋 작업 개요

### 작업 제목
캐릭터 상세보기 페이지 카드 사이즈 통일성 개선

### 작업 배경
- **문제점**: 캐릭터 상세보기 페이지에서 좌측 ProfileSection과 우측 4개 카드(MainStats, Ranking, Title, Daevanion)의 높이가 통일되지 않아 레이아웃이 불균형함
- **목표**: 프로필 카드를 기준으로 우측 카드들의 높이를 조정하여 시각적 일관성 확보
- **요구사항**: 가독성을 유지하면서 카드 크기를 최적화

### 작업 기간
2026-01-03

### 작업자
Claude Sonnet 4.5

---

## 📁 변경된 파일 목록

1. `frontend/src/app/c/[server]/[name]/page.tsx` - 메인 레이아웃
2. `frontend/src/app/components/MainStatsCard.tsx` - 주요 스텟 카드
3. `frontend/src/app/components/RankingCard.tsx` - 랭킹 정보 카드
4. `frontend/src/app/components/TitleCard.tsx` - 타이틀 카드
5. `frontend/src/app/components/DaevanionCard.tsx` - 주신 능력치 카드

---

## 🔧 상세 변경사항

### 1. `page.tsx` - 레이아웃 그리드 조정

**변경 내용:**
```typescript
// 이전
grid-template-columns: 280px minmax(400px, 1fr) 400px

// 이후
grid-template-columns: 280px minmax(400px, 1fr) 450px
```

**변경 이유:**
- 우측 컬럼 너비를 400px → 450px로 12.5% 확장
- 카드 내부 요소들에 더 많은 여유 공간 제공
- 텍스트 가독성 향상

**영향 범위:**
- Desktop (1024px 이상) 환경에서만 적용
- Tablet/Mobile은 기존 반응형 레이아웃 유지

---

### 2. `MainStatsCard.tsx` - 주요 스텟 카드 (220px 고정)

**주요 변경사항:**

#### 2.1 컨테이너 스타일
```typescript
// 추가된 속성
height: '220px',
boxSizing: 'border-box',
display: 'flex',
flexDirection: 'column'
```

#### 2.2 아이콘 크기 축소
```typescript
// 이전: width="28" height="28"
// 이후: width="22" height="22"
```
- 모든 SVG 아이콘 크기를 28px → 22px로 21% 축소

#### 2.3 폰트 크기 조정
```typescript
// 헤더
fontSize: '1.125rem' → '0.95rem'  // 15% 축소

// 스텟 라벨
fontSize: '0.75rem' → '0.7rem'     // 6% 축소

// 스텟 값
fontSize: '1rem' → '0.85rem'       // 15% 축소

// 더보기 버튼
fontSize: '0.875rem' → '0.8rem'    // 8% 축소
```

#### 2.4 간격 최적화
```typescript
// 헤더 하단 마진
marginBottom: '1.25rem' → '0.75rem'

// 그리드 간격
gap: '0.5rem' → '0.4rem'

// 스텟 아이템 패딩
padding: '0.75rem 0.25rem' → '0.5rem 0.2rem'

// 아이콘 하단 마진
marginBottom: '0.5rem' → '0.35rem'
```

#### 2.5 Flexbox 레이아웃
```typescript
// 그리드에 flex: 1 추가 (남은 공간 채우기)
// 더보기 버튼에 flexShrink: 0, height: '32px' 추가 (고정 높이)
```

**검토 포인트:**
- 6개 스텟이 한 행에 표시될 때 가독성이 충분한가?
- 아이콘 크기가 너무 작지 않은가?
- 더보기 버튼 클릭 영역이 충분한가?

---

### 3. `RankingCard.tsx` - 랭킹 정보 카드 (240px 고정)

**주요 변경사항:**

#### 3.1 컨테이너 스타일
```typescript
height: '240px',
boxSizing: 'border-box',
display: 'flex',
flexDirection: 'column'
```

#### 3.2 스크롤 추가
```typescript
// 랭킹 리스트에 스크롤 추가
overflowY: 'auto',
flex: 1
```
- 7개 랭킹 항목이 240px 안에 들어가지 않을 경우 스크롤 가능

#### 3.3 아이콘 및 폰트 크기 조정
```typescript
// 아이콘 컨테이너
width: '32px' → '24px'
height: '32px' → '24px'

// 아이콘 도트
width: '8px' → '6px'
height: '8px' → '6px'

// 라벨
fontSize: '0.9rem' → '0.8rem'

// 랭킹 값
fontSize: '0.95rem' → '0.85rem'

// 상세 정보
fontSize: '0.75rem' → '0.7rem'
```

#### 3.4 간격 축소
```typescript
// 리스트 간격
gap: '0.75rem' → '0.4rem'

// 아이템 패딩
padding: '0.75rem' → '0.4rem'

// 아이콘-라벨 간격
gap: '0.75rem' → '0.5rem'
```

**검토 포인트:**
- 7개 항목이 모두 표시되는가? 스크롤이 필요한가?
- 스크롤바 스타일이 적절한가? (커스텀 스타일 필요 여부)
- 아이템 간 간격이 너무 좁지 않은가?

---

### 4. `TitleCard.tsx` - 타이틀 카드 (120px 고정)

**주요 변경사항:**

#### 4.1 컨테이너 스타일
```typescript
height: '120px',
boxSizing: 'border-box',
display: 'flex',
flexDirection: 'column'
```

#### 4.2 아이콘 크기 축소
```typescript
// 모든 SVG 아이콘
width="24" height="24" → width="16" height="16"  // 33% 축소
```

#### 4.3 폰트 크기 조정
```typescript
// 헤더
fontSize: '1.125rem' → '0.9rem'

// 카운트 배지
fontSize: '0.875rem' → '0.75rem'
padding: '0.25rem 0.75rem' → '0.2rem 0.5rem'

// 카테고리명
fontSize: '0.875rem' → '0.7rem'

// 개수
fontSize: '0.75rem' → '0.7rem'

// 대표 타이틀 효과
fontSize: '0.6875rem' → '0.65rem'
```

#### 4.4 대표 타이틀 효과 간소화
```typescript
// 이전: 모든 효과를 세로로 나열
{category.representativeTitle.effects.map((effect, effectIdx) => (
    <span key={effectIdx}>{effect}</span>
))}

// 이후: 첫 번째 효과만 1줄로 표시 (말줄임)
{category.representativeTitle.effects.length > 0 && (
    <div style={{
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis'
    }}>
        {category.representativeTitle.effects[0]}
    </div>
)}
```

#### 4.5 툴팁 추가
```typescript
title={category.representativeTitle ?
    `${category.representativeTitle.name}\n${category.representativeTitle.effects.join('\n')}`
    : ''
}
```
- 호버 시 전체 타이틀명과 모든 효과 표시

#### 4.6 간격 최적화
```typescript
// 헤더 하단 마진
marginBottom: '1.25rem' → '0.5rem'

// 그리드 간격
gap: '0.75rem' → '0.4rem'

// 카드 패딩
padding: '0.875rem' → '0.4rem'

// 카테고리 헤더-카운트 간격
marginBottom: '0.5rem' → '0.3rem'
```

**검토 포인트:**
- 3개 카테고리가 한눈에 구분되는가?
- 1줄 효과 표시로 충분한 정보를 제공하는가?
- 툴팁이 제대로 작동하는가?
- 120px 높이가 너무 낮지 않은가?

---

### 5. `DaevanionCard.tsx` - 주신 능력치 카드 (90px 고정)

**주요 변경사항:**

#### 5.1 컨테이너 스타일
```typescript
height: '90px',
boxSizing: 'border-box',
display: 'flex',
flexDirection: 'column'
```

#### 5.2 레이아웃 변경: 2행 그리드 → 1행 플렉스
```typescript
// 이전: 3x2 그리드
display: 'grid',
gridTemplateColumns: 'repeat(3, 1fr)',
gap: '0.5rem'

// 이후: 1x6 플렉스
display: 'flex',
gap: '0.3rem',
flex: 1,
alignItems: 'center'
```

#### 5.3 신 카드 크기 조정
```typescript
// 이전: 그리드 아이템 (aspectRatio: 1)
// 이후:
width: `calc((100% - 1.5rem) / 6)`,
aspectRatio: '1'
```
- 6개 신을 균등 분할하여 1행에 배치

#### 5.4 아이콘 및 폰트 크기 축소
```typescript
// 헤더
fontSize: '1.125rem' → '0.85rem'

// 카운트 배지
fontSize: '0.75rem' → '0.7rem'
padding: '0.25rem 0.75rem' → '0.15rem 0.4rem'

// 신 아이콘
fontSize: '1.5rem' → '0.9rem'
```

#### 5.5 신 이름 숨김
```typescript
// 이전: 신 이름 표시
<div style={{ fontSize: '0.625rem' }}>
    {god.substring(0, 4)}
</div>

// 이후: 제거 (툴팁으로만 표시)
title={god}
```

#### 5.6 하단 요약 정보 제거
```typescript
// 이전: "활성화된 노드" 표시
<div style={{ padding: '0.75rem', ... }}>
    <span>활성화된 노드</span>
    <span>{totalNodes}</span>
</div>

// 이후: 완전 제거
```

#### 5.7 간격 최적화
```typescript
// 헤더 하단 마진
marginBottom: '1rem' → '0.4rem'

// 그리드 간격
gap: '0.5rem' → '0.3rem'

// 카드 패딩
padding: '0.2rem'
```

**검토 포인트:**
- 6개 신이 1행에 배치될 때 너무 작지 않은가?
- 활성/비활성 상태가 명확히 구분되는가?
- 하단 요약 정보 제거로 인한 정보 손실이 허용 가능한가?
- 90px 높이가 너무 낮지 않은가? (가장 작은 카드)

---

## 🎯 검토 요청 사항

### 1. 가독성 검증
- [ ] 모든 폰트 크기가 0.7rem 이상인가? (최소 가독성 기준)
- [ ] 아이콘 크기가 16px 이상인가? (시각적 인식 가능)
- [ ] 터치 영역이 44px 이상인가? (모바일 접근성)
- [ ] 색상 대비가 WCAG AA 기준(4.5:1) 이상인가?

### 2. 레이아웃 일관성
- [ ] 4개 카드의 총 높이가 ProfileSection 높이와 비슷한가?
  ```
  ProfileSection: ~639px
  MainStats(220) + Ranking(240) + Title(120) + Daevanion(90) = 670px
  + 간격(1rem * 3) = 718px
  ```
- [ ] 모든 카드의 패딩이 1rem으로 통일되었는가?
- [ ] 카드 간 간격이 1rem으로 통일되었는가?
- [ ] boxSizing: border-box가 적용되었는가?

### 3. 반응형 대응
- [ ] Desktop (1024px+)에서 정상 작동하는가?
- [ ] Tablet (768-1023px)에서 기존 레이아웃 유지되는가?
- [ ] Mobile (767px-)에서 기존 레이아웃 유지되는가?
- [ ] 창 크기 변경 시 깨지지 않는가?

### 4. 정보 손실 검증
- [ ] **MainStatsCard**: 6개 주요 스텟이 모두 표시되는가?
- [ ] **RankingCard**: 7개 랭킹 정보가 모두 표시되는가? (스크롤 필요)
- [ ] **TitleCard**: 대표 타이틀 효과 1줄 표시로 충분한가? (툴팁으로 전체 표시)
- [ ] **DaevanionCard**: 하단 노드 개수 제거가 허용 가능한가?

### 5. UX/인터랙션
- [ ] 스크롤바가 자연스럽게 표시되는가? (RankingCard)
- [ ] 호버 효과가 정상 작동하는가? (모든 카드)
- [ ] 툴팁이 제대로 표시되는가? (TitleCard, DaevanionCard)
- [ ] 더보기 버튼이 정상 작동하는가? (MainStatsCard)

### 6. 성능
- [ ] 불필요한 리렌더링이 발생하지 않는가?
- [ ] CSS 속성이 효율적으로 사용되었는가?
- [ ] Flexbox/Grid 사용이 적절한가?

### 7. 코드 품질
- [ ] Inline 스타일이 적절하게 사용되었는가?
- [ ] 매직 넘버가 없는가? (하드코딩된 값들)
- [ ] 주석이 필요한 부분에 작성되었는가?
- [ ] TypeScript 타입이 안전하게 사용되었는가?

### 8. 접근성 (a11y)
- [ ] 키보드 네비게이션이 가능한가?
- [ ] 스크린 리더 호환성이 있는가?
- [ ] ARIA 속성이 필요한가?
- [ ] 시맨틱 HTML이 사용되었는가?

---

## 📊 Before / After 비교

### Height 비교

| 카드 | 이전 | 이후 | 변화 |
|------|------|------|------|
| MainStatsCard | ~280px (가변) | 220px (고정) | -21% |
| RankingCard | ~350px (가변) | 240px (고정) | -31% |
| TitleCard | ~220px (가변) | 120px (고정) | -45% |
| DaevanionCard | ~180px (가변) | 90px (고정) | -50% |
| **총합** | **~1030px** | **670px** | **-35%** |

### 폰트 크기 비교

| 요소 | 이전 | 이후 | 비율 |
|------|------|------|------|
| 카드 헤더 | 1.125rem (18px) | 0.85-0.95rem (13.6-15.2px) | -15-24% |
| 본문 텍스트 | 0.875-1rem (14-16px) | 0.7-0.85rem (11.2-13.6px) | -12-20% |
| 보조 텍스트 | 0.625-0.75rem (10-12px) | 0.65-0.7rem (10.4-11.2px) | -4-8% |

### 아이콘 크기 비교

| 카드 | 이전 | 이후 | 변화 |
|------|------|------|------|
| MainStatsCard | 28px | 22px | -21% |
| RankingCard | 32px | 24px | -25% |
| TitleCard | 24px | 16px | -33% |
| DaevanionCard | 24px (1.5rem) | 14.4px (0.9rem) | -40% |

---

## 🚨 주의사항 및 리스크

### 1. 가독성 저하 위험
- **리스크**: 폰트와 아이콘 크기 축소로 인한 가독성 저하
- **완화 방안**:
  - 최소 폰트 크기 0.7rem (11.2px) 준수
  - 최소 아이콘 크기 16px 준수
  - 중요 정보는 굵은 글씨로 강조

### 2. 정보 손실
- **TitleCard**: 대표 타이틀 효과가 1줄만 표시됨
  - **완화**: 툴팁으로 전체 정보 제공
- **DaevanionCard**: 활성화된 노드 개수 정보 제거
  - **리스크**: 중요 정보 손실 가능성

### 3. UX 변화
- **RankingCard**: 스크롤 추가로 인한 UX 변화
  - **완화**: 스크롤바 커스텀 스타일 필요할 수 있음

### 4. 극단적인 데이터
- **긴 텍스트**: 타이틀명, 효과 설명이 길 경우 말줄임 처리
- **많은 랭킹 항목**: 7개 이상일 경우 스크롤 필요

### 5. 브라우저 호환성
- **CSS 속성**: flexbox, grid, aspectRatio 등 최신 속성 사용
- **확인 필요**: IE11, Safari 구버전 등

---

## 🎨 디자인 토큰

작업 중 사용된 디자인 토큰:

```css
/* 카드 높이 */
--main-stats-card-height: 220px;
--ranking-card-height: 240px;
--title-card-height: 120px;
--daevanion-card-height: 90px;

/* 컬럼 너비 */
--left-column-width: 280px;
--right-column-width: 450px;  /* 변경: 400px → 450px */
--center-column-min: 400px;

/* 간격 */
--card-gap: 1rem;
--card-padding: 1rem;

/* 폰트 크기 */
--font-size-header: 0.95rem;
--font-size-body: 0.8rem;
--font-size-small: 0.7rem;

/* 아이콘 크기 */
--icon-size-large: 24px;
--icon-size-medium: 20px;
--icon-size-small: 16px;
```

---

## 💡 개선 제안

검토 후 추가로 고려할 사항:

### 1. CSS 변수화
현재 모든 스타일이 inline으로 작성되어 있음. CSS 모듈 또는 CSS-in-JS로 변환 고려:
```typescript
// 예시
const cardStyles = {
  container: {
    height: 'var(--card-height)',
    padding: 'var(--card-padding)',
    // ...
  }
}
```

### 2. 커스텀 스크롤바
RankingCard의 스크롤바 스타일 개선:
```css
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-thumb {
  background: #1F2433;
  border-radius: 3px;
}
```

### 3. 애니메이션 추가
카드 높이 변경 시 부드러운 전환 효과:
```css
transition: all 0.3s ease;
```

### 4. 반응형 폰트 크기
`clamp()` 함수로 유동적인 폰트 크기:
```css
font-size: clamp(0.7rem, 1vw, 0.95rem);
```

### 5. 접근성 개선
- ARIA 라벨 추가
- 키보드 네비게이션 강화
- 포커스 스타일 개선

---

## 📝 테스트 시나리오

### 시나리오 1: 일반 사용자
1. 캐릭터 상세보기 페이지 접속
2. 프로필 카드와 우측 카드들의 정렬 확인
3. 각 카드의 정보가 모두 읽히는지 확인
4. 호버/클릭 인터랙션 정상 작동 확인

### 시나리오 2: 데이터 많은 경우
1. 랭킹 정보가 많은 캐릭터 확인
2. 스크롤이 제대로 작동하는지 확인
3. 타이틀 효과가 긴 경우 말줄임 확인
4. 툴팁으로 전체 정보 확인 가능한지 확인

### 시나리오 3: 작은 화면
1. 창 크기를 1024px 미만으로 축소
2. Tablet 레이아웃으로 전환 확인
3. Mobile 레이아웃으로 전환 확인
4. 반응형 동작 정상 확인

### 시나리오 4: 극단적인 데이터
1. 타이틀명이 매우 긴 경우
2. 효과 설명이 매우 긴 경우
3. 랭킹 항목이 10개 이상인 경우
4. 모든 주신이 활성화된 경우

---

## 🔍 검토 체크리스트

### 코드 품질
- [ ] 일관된 코딩 스타일 적용
- [ ] 하드코딩된 값 최소화
- [ ] 재사용 가능한 패턴 사용
- [ ] 주석이 명확하고 충분함

### 성능
- [ ] 불필요한 리렌더링 없음
- [ ] 최적화된 CSS 속성 사용
- [ ] 메모리 누수 없음

### 접근성
- [ ] 키보드 네비게이션 가능
- [ ] 스크린 리더 호환
- [ ] 색상 대비 충분
- [ ] 포커스 표시 명확

### 반응형
- [ ] Desktop 정상 작동
- [ ] Tablet 정상 작동
- [ ] Mobile 정상 작동
- [ ] 화면 전환 부드러움

### 사용성
- [ ] 정보 구조 명확
- [ ] 인터랙션 직관적
- [ ] 에러 처리 적절
- [ ] 로딩 상태 표시

---

## 📎 참고 자료

### 설계 문서
- `카드 사이즈 통일성 개선 설계도.md` - 상세 설계 문서

### 변경된 파일
1. `frontend/src/app/c/[server]/[name]/page.tsx:453`
2. `frontend/src/app/components/MainStatsCard.tsx:12-61,102-207`
3. `frontend/src/app/components/RankingCard.tsx:75-162`
4. `frontend/src/app/components/TitleCard.tsx:15-37,119-228`
5. `frontend/src/app/components/DaevanionCard.tsx:16-97`

### 관련 이슈
- 프로필 카드와 우측 카드들의 높이 불일치
- 카드 내부 요소들의 크기 통일성 부족
- 공간 활용 비효율

---

## 🙋 검토 질문

검토자분들께 다음 질문에 대한 의견을 부탁드립니다:

1. **높이 조정**: 각 카드의 고정 높이가 적절한가?
   - MainStats: 220px
   - Ranking: 240px
   - Title: 120px
   - Daevanion: 90px

2. **정보 손실**: 다음 정보 축소/제거가 허용 가능한가?
   - TitleCard: 대표 타이틀 효과 1줄만 표시
   - DaevanionCard: 활성화된 노드 개수 제거

3. **가독성**: 폰트 크기가 너무 작지 않은가?
   - 최소: 0.65rem (10.4px)
   - 일반: 0.7-0.85rem (11.2-13.6px)

4. **UX**: 스크롤 추가가 사용성을 해치지 않는가?
   - RankingCard에서만 스크롤 사용

5. **대안**: 더 나은 접근 방법이 있는가?
   - 예: 카드 접기/펼치기 기능
   - 예: 탭으로 정보 분할
   - 예: 모달로 상세 정보 표시

---

## 📧 검토 후 피드백 요청

다음 형식으로 피드백 부탁드립니다:

```markdown
## 검토 결과

### 전반적 평가
- [ ] 승인 (Approve)
- [ ] 조건부 승인 (Approve with comments)
- [ ] 수정 필요 (Request changes)
- [ ] 거부 (Reject)

### 주요 발견사항
1. [발견사항 1]
2. [발견사항 2]
...

### 개선 제안
1. [제안 1]
2. [제안 2]
...

### 질문 답변
1. 높이 조정: [의견]
2. 정보 손실: [의견]
3. 가독성: [의견]
4. UX: [의견]
5. 대안: [의견]

### 추가 코멘트
[자유 형식 코멘트]
```

---

**검토 기한**: 가능한 빠른 시일 내
**우선순위**: 중 (Medium)
**검토자**: 다른 AI 또는 개발자

감사합니다!
