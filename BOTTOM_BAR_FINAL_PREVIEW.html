<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>í•˜ë‹¨ ìˆ˜ì… ë°” ìµœì¢… ì„¤ê³„ë„</title>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #161618;
      color: #E5E7EB;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 32px;
      font-weight: 700;
      color: #FFFFFF;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 16px;
      color: #9CA3AF;
      margin-bottom: 40px;
    }

    /* ì„¤ëª… ì„¹ì…˜ */
    .description {
      background: #1b1b1e;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      border: 1px solid rgba(250, 204, 21, 0.2);
    }

    .description h2 {
      font-size: 20px;
      color: #FACC15;
      margin-bottom: 16px;
    }

    .description ul {
      list-style: none;
      padding-left: 0;
    }

    .description li {
      padding: 8px 0;
      color: #D1D5DB;
      line-height: 1.6;
    }

    .description li::before {
      content: "âœ“ ";
      color: #FACC15;
      font-weight: bold;
      margin-right: 8px;
    }

    /* ë°ëª¨ ë²„íŠ¼ */
    .demoControls {
      background: #1b1b1e;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 120px;
      border: 1px solid rgba(250, 204, 21, 0.2);
    }

    .demoControls h2 {
      font-size: 20px;
      color: #FACC15;
      margin-bottom: 16px;
    }

    .buttonGroup {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .demoButton {
      padding: 10px 20px;
      background: #FACC15;
      color: #0B0D12;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      transition: opacity 0.2s;
    }

    .demoButton:hover {
      opacity: 0.9;
    }

    .demoButton.secondary {
      background: transparent;
      color: #9CA3AF;
      border: 1px solid rgba(156, 163, 175, 0.5);
    }

    /* ê°€ì§œ ì»¨í…ì¸  */
    .mockContent {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 120px;
    }

    .mockCard {
      background: linear-gradient(135deg, rgba(26, 29, 36, 0.95) 0%, rgba(15, 17, 21, 0.95) 100%);
      border: 1.5px solid rgba(250, 204, 21, 0.3);
      border-radius: 11px;
      height: 112px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .mockCardTitle {
      font-size: 18px;
      font-weight: 700;
      color: #FACC15;
    }

    .mockCardProgress {
      font-size: 20px;
      font-weight: 700;
      color: #FACC15;
      font-family: 'Rajdhani', sans-serif;
    }

    .bonusCount {
      font-size: 16px;
      font-weight: 700;
      color: #10B981;
      margin-left: 4px;
      text-shadow: 0 0 8px rgba(16, 185, 129, 0.6);
    }

    /* í•˜ë‹¨ ìˆ˜ì… ë°” */
    .bottomIncomeBar {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);

      width: 100%;
      max-width: 1200px;
      height: 70px;
      padding: 0 16px;

      background: #0B0D12;
      border-top: 2px solid rgba(250, 204, 21, 0.2);
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;

      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);

      display: grid;
      grid-template-columns: 30% 1px 30% 1px 40%;
      align-items: center;
      gap: 16px;

      z-index: 100;
    }

    /* ìº˜ë¦°ë” ë²„íŠ¼ */
    .calendarButton {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);

      width: 32px;
      height: 32px;
      border-radius: 6px;
      background: rgba(250, 204, 21, 0.1);
      border: 1px solid rgba(250, 204, 21, 0.3);
      color: #FACC15;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .calendarButton:hover {
      background: rgba(250, 204, 21, 0.2);
      border-color: rgba(250, 204, 21, 0.5);
    }

    /* ìº˜ë¦°ë” íŒì—… */
    .calendarPopup {
      position: absolute;
      left: 16px;
      bottom: calc(100% + 12px);

      background: #1b1b1e;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(250, 204, 21, 0.3);
      padding: 16px;
      width: 280px;

      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
      transition: all 0.2s ease-out;

      z-index: 200;
    }

    .calendarPopup.active {
      opacity: 1;
      pointer-events: all;
      transform: translateY(0);
    }

    .calendarPopup::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 24px;

      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid #1b1b1e;
    }

    .calendarHeader {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .currentMonth {
      font-size: 14px;
      font-weight: 600;
      color: #FACC15;
    }

    .monthBtn {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #E5E7EB;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .monthBtn:hover {
      border-color: #FACC15;
      color: #FACC15;
    }

    .calendarWeekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin-bottom: 8px;
      text-align: center;
      font-size: 11px;
      color: #9CA3AF;
    }

    .calendarDays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin-bottom: 12px;
    }

    .dayBtn {
      aspect-ratio: 1;
      border-radius: 6px;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #E5E7EB;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .dayBtn:hover {
      background: rgba(250, 204, 21, 0.1);
      border-color: rgba(250, 204, 21, 0.3);
    }

    .dayBtn.selected {
      background: rgba(250, 204, 21, 0.2);
      border-color: #FACC15;
      color: #FACC15;
      font-weight: 700;
    }

    .dayBtn.today {
      border-color: rgba(250, 204, 21, 0.5);
    }

    .dayBtn.disabled {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }

    .todayBtn {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      background: rgba(250, 204, 21, 0.1);
      border: 1px solid rgba(250, 204, 21, 0.3);
      color: #FACC15;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .todayBtn:hover {
      background: rgba(250, 204, 21, 0.2);
    }

    /* ìˆ˜ì… ì„¹ì…˜ */
    .incomeSection {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }

    .sectionLabel {
      font-size: 12px;
      font-weight: 500;
      color: #9CA3AF;
      letter-spacing: 0.5px;
    }

    .sectionValue {
      font-size: 24px;
      font-weight: 700;
      color: #FACC15;
      font-family: 'Rajdhani', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 32px;
    }

    .divider {
      width: 1px;
      height: 40px;
      background: linear-gradient(
        to bottom,
        transparent,
        rgba(250, 204, 21, 0.3),
        transparent
      );
    }

    /* ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì„¹ì…˜ */
    .specialTicketSection {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      position: relative;
    }

    .specialTicketHeader {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .settingsButton {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      background: rgba(250, 204, 21, 0.1);
      border: 1px solid rgba(250, 204, 21, 0.3);
      color: #FACC15;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .settingsButton:hover {
      background: rgba(250, 204, 21, 0.2);
      border-color: rgba(250, 204, 21, 0.5);
      transform: rotate(90deg);
    }

    .specialTicketCount {
      font-size: 28px;
      font-weight: 700;
      color: #FACC15;
      font-family: 'Rajdhani', sans-serif;
    }

    /* íˆ´íŒ ëª¨ë‹¬ */
    .tooltipModal {
      position: absolute;
      bottom: calc(100% + 12px);
      right: -40px;

      background: #1b1b1e;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(250, 204, 21, 0.3);

      width: 280px;
      max-height: 500px;
      overflow: hidden;

      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
      transition: all 0.2s ease-out;

      z-index: 200;
    }

    .tooltipModal.active {
      opacity: 1;
      pointer-events: all;
      transform: translateY(0);
    }

    .tooltipModal::after {
      content: '';
      position: absolute;
      bottom: -8px;
      right: 48px;

      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid #1b1b1e;
    }

    .modalHeader {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .modalTitle {
      font-size: 14px;
      font-weight: 600;
      color: #ffffff;
    }

    .closeButton {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      background: transparent;
      border: none;
      color: #a5a8b4;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .closeButton:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.1);
    }

    .modalBody {
      padding: 12px 16px;
      max-height: 340px;
      overflow-y: auto;
    }

    .contentRow {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .contentRow:last-child {
      border-bottom: none;
    }

    .contentName {
      font-size: 13px;
      font-weight: 500;
      color: #E5E7EB;
    }

    .counterGroup {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .counterButton {
      width: 26px;
      height: 26px;
      border-radius: 5px;
      background: #212227;
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #E5E7EB;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .counterButton:hover:not(:disabled) {
      border-color: #FACC15;
      color: #FACC15;
    }

    .counterButton:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .counterButton.increment {
      background: rgba(250, 204, 21, 0.1);
      border-color: rgba(250, 204, 21, 0.3);
      color: #FACC15;
    }

    .counterButton.increment:hover:not(:disabled) {
      background: rgba(250, 204, 21, 0.2);
    }

    .counterValue {
      width: 64px; /* 48px â†’ 64px */
      height: 30px;
      background: #161618;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      text-align: center;
      font-size: 16px; /* 14px â†’ 16px */
      font-weight: 600;
      color: #FACC15;
      font-family: 'Rajdhani', sans-serif;
    }

    .counterValue:focus {
      outline: none;
      border-color: #FACC15;
    }

    .totalSummary {
      margin-top: 8px;
      padding-top: 12px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      font-size: 12px;
      color: #9CA3AF;
    }

    .totalCount {
      font-weight: 700;
      color: #FACC15;
      font-size: 16px;
    }

    .modalFooter {
      padding: 12px 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .applyButton {
      width: 100%;
      height: 40px;
      border-radius: 8px;
      background: #FACC15;
      border: none;
      color: #0B0D12;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .applyButton:hover {
      opacity: 0.9;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .mockContent {
        grid-template-columns: 1fr;
      }

      .bottomIncomeBar {
        height: auto;
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
        padding: 12px 16px 12px 56px;
        gap: 12px;
      }

      .calendarButton {
        left: 12px;
      }

      .divider {
        display: none;
      }

      .sectionValue {
        font-size: 20px;
      }

      .specialTicketCount {
        font-size: 24px;
      }

      .tooltipModal {
        right: auto;
        left: 50%;
        transform: translateX(-50%) translateY(10px);
      }

      .tooltipModal.active {
        transform: translateX(-50%) translateY(0);
      }

      .tooltipModal::after {
        left: 50%;
        transform: translateX(-50%);
      }

      .calendarPopup {
        left: 50%;
        transform: translateX(-50%) translateY(10px);
      }

      .calendarPopup.active {
        transform: translateX(-50%) translateY(0);
      }

      .calendarPopup::after {
        left: 50%;
        transform: translateX(-50%);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ’° í•˜ë‹¨ ìˆ˜ì… ë°” ìµœì¢… ì„¤ê³„</h1>
    <p class="subtitle">ìº˜ë¦°ë” + ì¹´ìš´íŠ¸ì—… ì• ë‹ˆë©”ì´ì…˜ + íˆ´íŒ ëª¨ë‹¬</p>

    <!-- ì„¤ëª… ì„¹ì…˜ -->
    <div class="description">
      <h2>ğŸ“‹ ìµœì¢… ë””ìì¸ íŠ¹ì§•</h2>
      <ul>
        <li><strong>ìº˜ë¦°ë” ë²„íŠ¼:</strong> ì™¼ìª½ ğŸ“… ë²„íŠ¼ìœ¼ë¡œ ë‚ ì§œë³„ ê°€ê³„ë¶€ ì¡°íšŒ</li>
        <li><strong>ì¹´ìš´íŠ¸ì—… ì• ë‹ˆë©”ì´ì…˜:</strong> ìˆ˜ì… ìˆ«ìê°€ ìŠˆë¥´ë¥µ ì˜¬ë¼ê° (1ì´ˆ)</li>
        <li><strong>íˆ´íŒ ëª¨ë‹¬:</strong> ì„¤ì • ë²„íŠ¼ ìœ„ì—ì„œ íŒì—… (ì¤‘ì•™ ëª¨ë‹¬ X)</li>
        <li><strong>ë„“ì€ ì…ë ¥ í•„ë“œ:</strong> 64px (ê¸°ì¡´ 48px)</li>
        <li><strong>ê¹”ë”í•œ ìˆ«ì:</strong> "0ê°œ ì ìš©ë¨" â†’ "0"</li>
      </ul>
    </div>

    <!-- ë°ëª¨ ì»¨íŠ¸ë¡¤ -->
    <div class="demoControls">
      <h2>ğŸ® ì¸í„°ë™í‹°ë¸Œ ë°ëª¨</h2>
      <p style="color: #D1D5DB; margin-bottom: 16px;">í•˜ë‹¨ ë°”ì˜ ê¸°ëŠ¥ë“¤ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</p>
      <div class="buttonGroup">
        <button class="demoButton" onclick="incrementIncome()">ğŸ’° ìˆ˜ì… ì¦ê°€ (ì¹´ìš´íŠ¸ì—… í™•ì¸)</button>
        <button class="demoButton" onclick="openTooltip()">âš™ï¸ ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì„¤ì •</button>
        <button class="demoButton" onclick="openCalendar()">ğŸ“… ìº˜ë¦°ë” ì—´ê¸°</button>
        <button class="demoButton secondary" onclick="resetAll()">ğŸ”„ ì „ì²´ ì´ˆê¸°í™”</button>
      </div>
    </div>

    <!-- ê°€ì§œ ì»¨í…ì¸  -->
    <div class="mockContent">
      <div class="mockCard">
        <div class="mockCardTitle">ì´ˆì›”</div>
        <div class="mockCardProgress">
          ì”ì—¬ íšŸìˆ˜: 3/5<span class="bonusCount" id="bonus-ì´ˆì›”"></span>
        </div>
      </div>
      <div class="mockCard">
        <div class="mockCardTitle">ì›ì •</div>
        <div class="mockCardProgress">
          ì”ì—¬ íšŸìˆ˜: 2/3<span class="bonusCount" id="bonus-ì›ì •"></span>
        </div>
      </div>
      <div class="mockCard">
        <div class="mockCardTitle">ì¼ì¼ë˜ì „</div>
        <div class="mockCardProgress">
          ì”ì—¬ íšŸìˆ˜: 1/3<span class="bonusCount" id="bonus-ì¼ì¼ë˜ì „"></span>
        </div>
      </div>
      <div class="mockCard">
        <div class="mockCardTitle">ê°ì„±ì „</div>
        <div class="mockCardProgress">
          ì”ì—¬ íšŸìˆ˜: 0/5<span class="bonusCount" id="bonus-ê°ì„±ì „"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- í•˜ë‹¨ ìˆ˜ì… ë°” -->
  <div class="bottomIncomeBar">
    <!-- ìº˜ë¦°ë” ë²„íŠ¼ -->
    <button class="calendarButton" onclick="toggleCalendar()" title="ë‚ ì§œ ì„ íƒ">ğŸ“…</button>

    <!-- ìº˜ë¦°ë” íŒì—… -->
    <div class="calendarPopup" id="calendarPopup">
      <div class="calendarHeader">
        <button class="monthBtn" onclick="prevMonth()">â€¹</button>
        <div class="currentMonth" id="currentMonth">2024ë…„ 1ì›”</div>
        <button class="monthBtn" onclick="nextMonth()">â€º</button>
      </div>

      <div class="calendarWeekdays">
        <div>ì¼</div>
        <div>ì›”</div>
        <div>í™”</div>
        <div>ìˆ˜</div>
        <div>ëª©</div>
        <div>ê¸ˆ</div>
        <div>í† </div>
      </div>

      <div class="calendarDays" id="calendarDays"></div>

      <button class="todayBtn" onclick="goToToday()">ì˜¤ëŠ˜ë¡œ ì´ë™</button>
    </div>

    <!-- ì¼ì¼ ìˆ˜ì… (30%) -->
    <div class="incomeSection">
      <div class="sectionLabel">ì¼ì¼ ìˆ˜ì…</div>
      <div class="sectionValue">
        <span id="dailyIncome">0</span><span style="font-size: 14px; color: #D1D5DB; margin-left: 4px; opacity: 0.8;">í‚¤ë‚˜</span>
      </div>
    </div>

    <!-- êµ¬ë¶„ì„  -->
    <div class="divider"></div>

    <!-- ì£¼ê°„ ìˆ˜ì… (30%) -->
    <div class="incomeSection">
      <div class="sectionLabel">ì£¼ê°„ ìˆ˜ì…</div>
      <div class="sectionValue">
        <span id="weeklyIncome">0</span><span style="font-size: 14px; color: #D1D5DB; margin-left: 4px; opacity: 0.8;">í‚¤ë‚˜</span>
      </div>
    </div>

    <!-- êµ¬ë¶„ì„  -->
    <div class="divider"></div>

    <!-- ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì ìš© (40%) -->
    <div class="specialTicketSection">
      <div class="specialTicketHeader">
        <div class="sectionLabel">ìŠ¤í˜ì…œ ì´ìš©ê¶Œ</div>
        <button class="settingsButton" onclick="toggleTooltip()" title="ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì„¤ì •">âš™</button>
      </div>
      <div class="specialTicketCount" id="totalTicketsDisplay">0</div>

      <!-- íˆ´íŒ ëª¨ë‹¬ -->
      <div class="tooltipModal" id="tooltipModal">
        <div class="modalHeader">
          <div class="modalTitle">ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì ìš©</div>
          <button class="closeButton" onclick="closeTooltip()">âœ•</button>
        </div>

        <div class="modalBody">
          <!-- ì´ˆì›” -->
          <div class="contentRow">
            <div class="contentName">ì´ˆì›”</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ì´ˆì›”')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ì´ˆì›”" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ì´ˆì›”')">+</button>
            </div>
          </div>

          <!-- ì›ì • -->
          <div class="contentRow">
            <div class="contentName">ì›ì •</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ì›ì •')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ì›ì •" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ì›ì •')">+</button>
            </div>
          </div>

          <!-- ì¼ì¼ë˜ì „ -->
          <div class="contentRow">
            <div class="contentName">ì¼ì¼ë˜ì „</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ì¼ì¼ë˜ì „')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ì¼ì¼ë˜ì „" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ì¼ì¼ë˜ì „')">+</button>
            </div>
          </div>

          <!-- ê°ì„±ì „ -->
          <div class="contentRow">
            <div class="contentName">ê°ì„±ì „</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ê°ì„±ì „')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ê°ì„±ì „" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ê°ì„±ì „')">+</button>
            </div>
          </div>

          <!-- í† ë²Œì „ -->
          <div class="contentRow">
            <div class="contentName">í† ë²Œì „</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('í† ë²Œì „')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-í† ë²Œì „" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('í† ë²Œì „')">+</button>
            </div>
          </div>

          <!-- ì•…ëª½ -->
          <div class="contentRow">
            <div class="contentName">ì•…ëª½</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ì•…ëª½')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ì•…ëª½" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ì•…ëª½')">+</button>
            </div>
          </div>

          <!-- ì°¨ì›ì¹¨ê³µ -->
          <div class="contentRow">
            <div class="contentName">ì°¨ì›ì¹¨ê³µ</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ì°¨ì›ì¹¨ê³µ')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ì°¨ì›ì¹¨ê³µ" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ì°¨ì›ì¹¨ê³µ')">+</button>
            </div>
          </div>

          <!-- ì„±ì—­ -->
          <div class="contentRow">
            <div class="contentName">ì„±ì—­</div>
            <div class="counterGroup">
              <button class="counterButton" onclick="decrementTicket('ì„±ì—­')">âˆ’</button>
              <input type="number" class="counterValue" id="ticket-ì„±ì—­" value="0" min="0" max="99" onchange="updateTotal()">
              <button class="counterButton increment" onclick="incrementTicket('ì„±ì—­')">+</button>
            </div>
          </div>

          <div class="totalSummary">
            ì´: <span class="totalCount" id="modalTotalCount">0</span>ê°œ
          </div>
        </div>

        <div class="modalFooter">
          <button class="applyButton" onclick="applyTickets()">ì ìš©</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const contentTypes = ['ì´ˆì›”', 'ì›ì •', 'ì¼ì¼ë˜ì „', 'ê°ì„±ì „', 'í† ë²Œì „', 'ì•…ëª½', 'ì°¨ì›ì¹¨ê³µ', 'ì„±ì—­'];
    let currentTickets = {};
    let dailyIncomeValue = 1234567;
    let weeklyIncomeValue = 5678901;

    let currentDate = new Date();
    let selectedDate = new Date();

    // ì¹´ìš´íŠ¸ì—… ì• ë‹ˆë©”ì´ì…˜
    function animateValue(element, start, end, duration) {
      let startTime = null;

      function step(timestamp) {
        if (!startTime) startTime = timestamp;
        const progress = Math.min((timestamp - startTime) / duration, 1);

        // easeOutCubic
        const easeOut = 1 - Math.pow(1 - progress, 3);
        const value = Math.floor(start + (end - start) * easeOut);

        element.textContent = value.toLocaleString();

        if (progress < 1) {
          requestAnimationFrame(step);
        } else {
          element.textContent = end.toLocaleString();
        }
      }

      requestAnimationFrame(step);
    }

    // ìˆ˜ì… ì¦ê°€
    function incrementIncome() {
      const oldDaily = dailyIncomeValue;
      const oldWeekly = weeklyIncomeValue;

      dailyIncomeValue += 100000;
      weeklyIncomeValue += 100000;

      animateValue(document.getElementById('dailyIncome'), oldDaily, dailyIncomeValue, 1000);
      setTimeout(() => {
        animateValue(document.getElementById('weeklyIncome'), oldWeekly, weeklyIncomeValue, 1000);
      }, 150);
    }

    // íˆ´íŒ í† ê¸€
    function toggleTooltip() {
      const tooltip = document.getElementById('tooltipModal');
      const calendar = document.getElementById('calendarPopup');
      calendar.classList.remove('active');
      tooltip.classList.toggle('active');
      updateTotal();
    }

    function openTooltip() {
      document.getElementById('tooltipModal').classList.add('active');
      document.getElementById('calendarPopup').classList.remove('active');
      updateTotal();
    }

    function closeTooltip() {
      document.getElementById('tooltipModal').classList.remove('active');
    }

    // ìº˜ë¦°ë” í† ê¸€
    function toggleCalendar() {
      const calendar = document.getElementById('calendarPopup');
      const tooltip = document.getElementById('tooltipModal');
      tooltip.classList.remove('active');
      calendar.classList.toggle('active');

      if (calendar.classList.contains('active')) {
        renderCalendar();
      }
    }

    function openCalendar() {
      document.getElementById('calendarPopup').classList.add('active');
      document.getElementById('tooltipModal').classList.remove('active');
      renderCalendar();
    }

    function closeCalendar() {
      document.getElementById('calendarPopup').classList.remove('active');
    }

    // ìº˜ë¦°ë” ë Œë”ë§
    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();

      document.getElementById('currentMonth').textContent = `${year}ë…„ ${month + 1}ì›”`;

      const firstDay = new Date(year, month, 1).getDay();
      const lastDate = new Date(year, month + 1, 0).getDate();

      const daysContainer = document.getElementById('calendarDays');
      daysContainer.innerHTML = '';

      // ë¹ˆ ì¹¸
      for (let i = 0; i < firstDay; i++) {
        const emptyBtn = document.createElement('button');
        emptyBtn.className = 'dayBtn disabled';
        emptyBtn.disabled = true;
        daysContainer.appendChild(emptyBtn);
      }

      // ë‚ ì§œ ë²„íŠ¼
      const today = new Date();
      for (let day = 1; day <= lastDate; day++) {
        const dayBtn = document.createElement('button');
        dayBtn.className = 'dayBtn';
        dayBtn.textContent = day;

        // ì˜¤ëŠ˜ í‘œì‹œ
        if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
          dayBtn.classList.add('today');
        }

        // ì„ íƒëœ ë‚ ì§œ í‘œì‹œ
        if (year === selectedDate.getFullYear() && month === selectedDate.getMonth() && day === selectedDate.getDate()) {
          dayBtn.classList.add('selected');
        }

        dayBtn.onclick = () => selectDate(year, month, day);
        daysContainer.appendChild(dayBtn);
      }
    }

    // ë‚ ì§œ ì„ íƒ
    function selectDate(year, month, day) {
      selectedDate = new Date(year, month, day);
      closeCalendar();

      console.log(`ì„ íƒëœ ë‚ ì§œ: ${year}-${month + 1}-${day}`);

      // ë‚ ì§œê°€ ë³€ê²½ë˜ë©´ ìˆ˜ì… ë‹¤ì‹œ ë¡œë“œ (ë°ëª¨ìš© ëœë¤ ê°’)
      const newDaily = Math.floor(Math.random() * 2000000) + 500000;
      const newWeekly = Math.floor(Math.random() * 8000000) + 3000000;

      animateValue(document.getElementById('dailyIncome'), 0, newDaily, 1000);
      setTimeout(() => {
        animateValue(document.getElementById('weeklyIncome'), 0, newWeekly, 1000);
      }, 150);

      dailyIncomeValue = newDaily;
      weeklyIncomeValue = newWeekly;
    }

    // ì´ì „ ë‹¬
    function prevMonth() {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    }

    // ë‹¤ìŒ ë‹¬
    function nextMonth() {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    }

    // ì˜¤ëŠ˜ë¡œ ì´ë™
    function goToToday() {
      const today = new Date();
      selectDate(today.getFullYear(), today.getMonth(), today.getDate());
      currentDate = new Date();
    }

    // ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ê¸°ëŠ¥
    function incrementTicket(contentType) {
      const input = document.getElementById(`ticket-${contentType}`);
      let value = parseInt(input.value) || 0;
      if (value < 99) {
        input.value = value + 1;
        updateTotal();
      }
    }

    function decrementTicket(contentType) {
      const input = document.getElementById(`ticket-${contentType}`);
      let value = parseInt(input.value) || 0;
      if (value > 0) {
        input.value = value - 1;
        updateTotal();
      }
    }

    function updateTotal() {
      let total = 0;
      contentTypes.forEach(type => {
        const input = document.getElementById(`ticket-${type}`);
        const value = parseInt(input.value) || 0;

        if (value < 0) input.value = 0;
        if (value > 99) input.value = 99;

        total += parseInt(input.value) || 0;
      });

      document.getElementById('modalTotalCount').textContent = total;
    }

    function applyTickets() {
      contentTypes.forEach(type => {
        const input = document.getElementById(`ticket-${type}`);
        currentTickets[type] = parseInt(input.value) || 0;
      });

      const total = Object.values(currentTickets).reduce((sum, val) => sum + val, 0);

      // ìˆ«ìë§Œ í‘œì‹œ
      document.getElementById('totalTicketsDisplay').textContent = total;

      updateContentCards();
      closeTooltip();

      console.log('ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì ìš©:', currentTickets);
    }

    function updateContentCards() {
      contentTypes.forEach(type => {
        const bonusElement = document.getElementById(`bonus-${type}`);
        if (bonusElement) {
          const bonus = currentTickets[type] || 0;
          if (bonus > 0) {
            bonusElement.textContent = ` (+${bonus})`;
            bonusElement.style.display = 'inline';
          } else {
            bonusElement.textContent = '';
            bonusElement.style.display = 'none';
          }
        }
      });
    }

    function resetAll() {
      // ìŠ¤í˜ì…œ ì´ìš©ê¶Œ ì´ˆê¸°í™”
      contentTypes.forEach(type => {
        const input = document.getElementById(`ticket-${type}`);
        if (input) input.value = 0;
        currentTickets[type] = 0;
      });

      document.getElementById('totalTicketsDisplay').textContent = '0';
      updateContentCards();
      updateTotal();

      // ìˆ˜ì… ì´ˆê¸°í™”
      dailyIncomeValue = 1234567;
      weeklyIncomeValue = 5678901;

      animateValue(document.getElementById('dailyIncome'), 0, dailyIncomeValue, 1000);
      setTimeout(() => {
        animateValue(document.getElementById('weeklyIncome'), 0, weeklyIncomeValue, 1000);
      }, 150);

      // ë‚ ì§œ ì´ˆê¸°í™”
      currentDate = new Date();
      selectedDate = new Date();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ
    window.addEventListener('load', () => {
      resetAll();
    });

    // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeTooltip();
        closeCalendar();
      }
    });

    // ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    document.addEventListener('click', (e) => {
      const tooltip = document.getElementById('tooltipModal');
      const calendar = document.getElementById('calendarPopup');
      const settingsBtn = document.querySelector('.settingsButton');
      const calendarBtn = document.querySelector('.calendarButton');

      if (!tooltip.contains(e.target) && e.target !== settingsBtn) {
        closeTooltip();
      }

      if (!calendar.contains(e.target) && e.target !== calendarBtn) {
        closeCalendar();
      }
    });
  </script>
</body>
</html>
